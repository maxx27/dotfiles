# Update PATH
while IFS= read -r p || [[ "$p" ]]; do
    # replace ~ with home directory
    p="${p/#\~/$HOME}"
    # remove last trailing slash
    p=${p%/}

    # skip comments and missing directories and already added in PATH
    if ! [[ "$p" =~ ^#\ .* ]] && [ -d "$p" ] && [[ ":$PATH:" != *":$p:"* ]]; then
        export PATH="$p:$PATH"
        # echo "--> $p"
    else
        # echo "skip --> $p"
        : # to avoid parsing error for empty else/fi
    fi
done < ~/.misc/paths
unset p
